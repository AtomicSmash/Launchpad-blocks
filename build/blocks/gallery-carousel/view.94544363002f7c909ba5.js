(function(p,l){if(typeof exports=="object"&&typeof module=="object")module.exports=l();else if(typeof define=="function"&&define.amd)define([],l);else{var f=l();for(var _ in f)(typeof exports=="object"?exports:p)[_]=f[_]}})(globalThis,()=>(()=>{"use strict";var x={6:((i,s,r)=>{r.d(s,{Carousel:()=>v});var c=r(8490),g=r.n(c);const a=window.wp.hooks;function h(e){if(e===void 0)throw new Error(`Pixel value ${e} is undefined`);if(!e.endsWith("px"))throw new Error(`Pixel value ${e} is not a pixel value`);if(e.includes(" "))throw new Error(`Pixel value ${e} contains multiple values`);return Number(e.replace("px",""))}function w(e){let t="";const o=document.createElement("div");return o.innerHTML=e,t=o.innerText,T(t)}function T(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|(?<!-)-+$/g,"")}function P(e,t=()=>!0){const o=e.parentElement;return o===null?null:t(o)?o:P(o,t)}function M(e){if(new RegExp("ms$","ig").test(e))return Number(e.substring(0,e.length-2));if(new RegExp("s$","ig").test(e))return Number(e.substring(0,e.length-1))*1e3;throw new Error("Time didn't end with ms or s so was not correctly parsed.")}function O(){if(typeof document>"u")return"unknown";const e=window.navigator.userAgent;let t="unknown";return e.search("Windows")!==-1?t="Windows":e.search("Mac")!==-1?t="MacOS":e.search("X11")!==-1&&e.search("Linux")===-1?t="UNIX":e.search("Linux")!==-1&&e.search("X11")!==-1&&(t="Linux"),t}function L(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!Object.entries(e[o]).every(([u,d])=>Array.isArray(d)?L(d,t[o]?.[u]):t[o]?.[u]===d))return!1;return!0}class v{carousel;carouselLiveRegion;carouselSlides;slideWidth;slideGap;slideCount;currentSlide;loop;debounceResizeTimeout=void 0;constructor(t){this.carousel=t,this.loop=this.carousel.dataset.loop==="true",this.currentSlide=0;const o=t.querySelector("div[data-carousel-live-region]");if(!o)throw new Error("Carousels must have a live region for accessibility.");this.carouselLiveRegion=o;const n=t.querySelector("ul[data-carousel-slides]");if(!n)throw new Error("Carousels must have a slides element.");this.carouselSlides=n,this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:u,slideWidth:d,slideGap:A}=this.getSlideInfo();this.slideCount=u,this.slideGap=A,this.slideWidth=d,(0,a.doAction)("launchpadBlocks.carousel.registerFunctionality",this),(0,a.addAction)("hookAdded","launchpadBlocks.carousel",(b,m,S,W)=>{b==="launchpadBlocks.carousel.registerFunctionality"&&S(this)}),window.addEventListener("resize",()=>{clearTimeout(this.debounceResizeTimeout),this.debounceResizeTimeout=setTimeout(()=>{this.carouselSlides.style.width="",this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:b,slideWidth:m,slideGap:S}=this.getSlideInfo();this.slideCount=b,this.slideGap=S,this.slideWidth=m,this.goToSlide(this.currentSlide,!0,!0)},100)})}getSlideInfo(){const t=this.carouselSlides.querySelectorAll(":scope > *").length,o=this.carouselSlides.querySelector(":scope > *")?.clientWidth,n=window.getComputedStyle(this.carouselSlides).getPropertyValue("column-gap"),u=h(n.endsWith("px")?n:"0px");if(!o)throw new Error("Unable to get the slide width for the carousel.");return{slideCount:t,slideWidth:o,slideGap:u}}goToSlide(t,o=!1,n=!1){if(this.currentSlide===t&&!n)return;if(t<0)throw new Error("The slide number must be more than zero.");if(t>this.slideCount)throw new Error("The slide number must less than the total number of slides.");const u=this.carouselSlides.scrollLeft,d=t*(this.slideWidth+this.slideGap);this.currentSlide=t,this.carouselSlides.scrollBy({left:d-u,behavior:o?"instant":"auto"}),this.carouselLiveRegion.textContent=`Slide ${this.currentSlide+1} of ${this.slideCount}`,(0,a.doAction)("launchpadBlocks.carousel.updateActiveSlide")}goToPreviousSlide(t=!1){let o=this.currentSlide-1;if(o<0){if(!this.loop)return;o=this.slideCount-1}this.goToSlide(o,t)}goToNextSlide(t=!1){let o=this.currentSlide+1;if(o>=this.slideCount){if(!this.loop)return;o=0}this.goToSlide(o,t)}}g()(()=>{const e=document.querySelectorAll("[data-launchpad-carousel]");for(const t of e)t.parentElement?.dataset.lightbox!==""&&new v(t)})}),4946:((i,s,r)=>{r.d(s,{Lightbox:()=>g});var c=r(6);class g{lightbox;carousel=null;constructor(h){this.lightbox=h;const w=this.lightbox.querySelector("button[data-lightbox-close-button]");if(!w)throw new Error("The lightbox must have a close button.");w.addEventListener("click",()=>{this.close()})}initCarousel(){this.lightbox.style.opacity="0";const h=this.lightbox.querySelector("div[data-launchpad-carousel]");if(!h)throw new Error("Expected to initialise a carousel in the gallery lightbox, but one wasn't found.");this.carousel=new c.Carousel(h),this.lightbox.style.opacity=""}open(){this.lightbox.showModal()}close(){this.lightbox.close()}}}),8490:(i=>{i.exports=window.wp.domReady})},p={};function l(i){var s=p[i];if(s!==void 0)return s.exports;var r=p[i]={exports:{}};return x[i](r,r.exports,l),r.exports}l.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return l.d(s,{a:s}),s},l.d=(i,s)=>{for(var r in s)l.o(s,r)&&!l.o(i,r)&&Object.defineProperty(i,r,{enumerable:!0,get:s[r]})},l.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),l.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var f={};l.r(f);var _=l(8490),y=l.n(_),E=l(4946);class C{carousel;carouselSlides=null;lightbox=null;constructor(s){this.carousel=s;const r=s.querySelector("dialog[data-lightbox]");if(!r)return;this.lightbox=new E.Lightbox(r);const c=s.querySelector("ul[data-carousel-slides]");if(!c)throw new Error("Carousels must have a slides element.");this.carouselSlides=c;const g=this.carouselSlides.querySelectorAll("button[data-lightbox-open-button]");for(const a of g)a.addEventListener("click",()=>{this.lightbox&&(this.lightbox.open(),this.lightbox.carousel||this.lightbox.initCarousel(),this.lightbox.carousel.goToSlide(Number(a.dataset.jumpToSlide),!0))})}}return y()(()=>{const i=document.querySelectorAll("[data-launchpad-gallery-carousel]");for(const s of i)new C(s)}),f})());
