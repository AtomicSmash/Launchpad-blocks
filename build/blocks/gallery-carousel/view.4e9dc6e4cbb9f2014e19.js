(function(g,r){if(typeof exports=="object"&&typeof module=="object")module.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var f=r();for(var w in f)(typeof exports=="object"?exports:g)[w]=f[w]}})(globalThis,()=>(()=>{"use strict";var x={6:((i,s,l)=>{l.d(s,{Carousel:()=>v});var c=l(8490),p=l.n(c);const a=window.wp.hooks;function h(e){if(e===void 0)throw new Error(`Pixel value ${e} is undefined`);if(!e.endsWith("px"))throw new Error(`Pixel value ${e} is not a pixel value`);if(e.includes(" "))throw new Error(`Pixel value ${e} contains multiple values`);return Number(e.replace("px",""))}function S(e){let t="";const o=document.createElement("div");return o.innerHTML=e,t=o.innerText,P(t)}function P(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|(?<!-)-+$/g,"")}function L(e,t=()=>!0){const o=e.parentElement;return o===null?null:t(o)?o:L(o,t)}function O(e){if(new RegExp("ms$","ig").test(e))return Number(e.substring(0,e.length-2));if(new RegExp("s$","ig").test(e))return Number(e.substring(0,e.length-1))*1e3;throw new Error("Time didn't end with ms or s so was not correctly parsed.")}function I(){if(typeof document>"u")return"unknown";const e=window.navigator.userAgent;let t="unknown";return e.search("Windows")!==-1?t="Windows":e.search("Mac")!==-1?t="MacOS":e.search("X11")!==-1&&e.search("Linux")===-1?t="UNIX":e.search("Linux")!==-1&&e.search("X11")!==-1&&(t="Linux"),t}function M(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!Object.entries(e[o]).every(([d,u])=>Array.isArray(u)?M(u,t[o]?.[d]):t[o]?.[d]===u))return!1;return!0}class v{carousel;carouselLiveRegion;carouselSlides;slideWidth;slideGap;slideCount;fullSlidesShownInViewport;currentSlide;loop;debounceResizeTimeout=void 0;constructor(t){this.carousel=t,this.loop=this.carousel.dataset.loop==="true",this.currentSlide=0;const o=t.querySelector("div[data-carousel-live-region]");if(!o)throw new Error("Carousels must have a live region for accessibility.");this.carouselLiveRegion=o;const n=t.querySelector("ul[data-carousel-slides]");if(!n)throw new Error("Carousels must have a slides element.");this.carouselSlides=n,this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:d,slideWidth:u,slideGap:W,fullSlidesShownInViewport:A}=this.getSlideInfo();this.slideCount=d,this.slideGap=W,this.slideWidth=u,this.fullSlidesShownInViewport=A,(0,a.doAction)("launchpadBlocks.carousel.registerFunctionality",this),(0,a.addAction)("hookAdded","launchpadBlocks.carousel",(_,m,b,y)=>{_==="launchpadBlocks.carousel.registerFunctionality"&&b(this)}),window.addEventListener("resize",()=>{clearTimeout(this.debounceResizeTimeout),this.debounceResizeTimeout=setTimeout(()=>{this.carouselSlides.style.width="",this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:_,slideWidth:m,slideGap:b,fullSlidesShownInViewport:y}=this.getSlideInfo();this.slideCount=_,this.slideGap=b,this.slideWidth=m,this.fullSlidesShownInViewport=y,this.goToSlide(this.currentSlide,!0,!0)},100)})}getSlideInfo(){const t=this.carouselSlides.querySelectorAll(":scope > *").length,o=this.carouselSlides.querySelector(":scope > *")?.clientWidth,n=window.getComputedStyle(this.carouselSlides).getPropertyValue("column-gap"),d=h(n.endsWith("px")?n:"0px");if(!o)throw new Error("Unable to get the slide width for the carousel.");const u=Math.floor(this.carouselSlides.clientWidth/o);return{slideCount:t,slideWidth:o,slideGap:d,fullSlidesShownInViewport:u}}goToSlide(t,o=!1,n=!1){if(this.currentSlide===t&&!n)return;if(t<0)throw new Error("The slide number must be more than zero.");if(t>this.slideCount)throw new Error("The slide number must less than the total number of slides.");const d=this.carouselSlides.scrollLeft,u=t*(this.slideWidth+this.slideGap);this.currentSlide=t,this.carouselSlides.scrollBy({left:u-d,behavior:o?"instant":"auto"}),this.carouselLiveRegion.textContent=`Slide ${this.currentSlide+1} of ${this.slideCount}`,(0,a.doAction)("launchpadBlocks.carousel.updateActiveSlide")}goToPreviousSlide(t=!1){let o=this.currentSlide-1;if(o<0){if(!this.loop)return;o=this.slideCount-(this.fullSlidesShownInViewport-1)-1}this.goToSlide(o,t)}goToNextSlide(t=!1){let o=this.currentSlide+1;if(o>=this.slideCount-(this.fullSlidesShownInViewport-1)){if(!this.loop)return;o=0}this.goToSlide(o,t)}}p()(()=>{const e=document.querySelectorAll("[data-launchpad-carousel]");for(const t of e)t.parentElement?.dataset.lightbox!==""&&new v(t)})}),4946:((i,s,l)=>{l.d(s,{Lightbox:()=>p});var c=l(6);class p{lightbox;carousel=null;constructor(h){this.lightbox=h;const S=this.lightbox.querySelector("button[data-lightbox-close-button]");if(!S)throw new Error("The lightbox must have a close button.");S.addEventListener("click",()=>{this.close()})}initCarousel(){this.lightbox.style.opacity="0";const h=this.lightbox.querySelector("div[data-launchpad-carousel]");if(!h)throw new Error("Expected to initialise a carousel in the gallery lightbox, but one wasn't found.");this.carousel=new c.Carousel(h),this.lightbox.style.opacity=""}open(){this.lightbox.showModal()}close(){this.lightbox.close()}}}),8490:(i=>{i.exports=window.wp.domReady})},g={};function r(i){var s=g[i];if(s!==void 0)return s.exports;var l=g[i]={exports:{}};return x[i](l,l.exports,r),l.exports}r.n=i=>{var s=i&&i.__esModule?()=>i.default:()=>i;return r.d(s,{a:s}),s},r.d=(i,s)=>{for(var l in s)r.o(s,l)&&!r.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:s[l]})},r.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var f={};r.r(f);var w=r(8490),E=r.n(w),C=r(4946);class T{carousel;carouselSlides=null;lightbox=null;constructor(s){this.carousel=s;const l=s.querySelector("dialog[data-lightbox]");if(!l)return;this.lightbox=new C.Lightbox(l);const c=s.querySelector("ul[data-carousel-slides]");if(!c)throw new Error("Carousels must have a slides element.");this.carouselSlides=c;const p=this.carouselSlides.querySelectorAll("button[data-lightbox-open-button]");for(const a of p)a.addEventListener("click",()=>{this.lightbox&&(this.lightbox.open(),this.lightbox.carousel||this.lightbox.initCarousel(),this.lightbox.carousel.goToSlide(Number(a.dataset.jumpToSlide),!0))})}}return E()(()=>{const i=document.querySelectorAll("[data-launchpad-gallery-carousel]");for(const s of i)new T(s)}),f})());
