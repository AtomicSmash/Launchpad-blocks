(function(a,r){if(typeof exports=="object"&&typeof module=="object")module.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var c=r();for(var h in c)(typeof exports=="object"?exports:a)[h]=c[h]}})(globalThis,()=>(()=>{"use strict";var g={6:((o,s,l)=>{l.d(s,{Carousel:()=>S});var _=l(8490),m=l.n(_);const f=window.wp.hooks;function y(e){if(e===void 0)throw new Error(`Pixel value ${e} is undefined`);if(!e.endsWith("px"))throw new Error(`Pixel value ${e} is not a pixel value`);if(e.includes(" "))throw new Error(`Pixel value ${e} contains multiple values`);return Number(e.replace("px",""))}function L(e){let t="";const i=document.createElement("div");return i.innerHTML=e,t=i.innerText,E(t)}function E(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|(?<!-)-+$/g,"")}function C(e,t=()=>!0){const i=e.parentElement;return i===null?null:t(i)?i:C(i,t)}function A(e){if(new RegExp("ms$","ig").test(e))return Number(e.substring(0,e.length-2));if(new RegExp("s$","ig").test(e))return Number(e.substring(0,e.length-1))*1e3;throw new Error("Time didn't end with ms or s so was not correctly parsed.")}function M(){if(typeof document>"u")return"unknown";const e=window.navigator.userAgent;let t="unknown";return e.search("Windows")!==-1?t="Windows":e.search("Mac")!==-1?t="MacOS":e.search("X11")!==-1&&e.search("Linux")===-1?t="UNIX":e.search("Linux")!==-1&&e.search("X11")!==-1&&(t="Linux"),t}function T(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Object.entries(e[i]).every(([d,u])=>Array.isArray(u)?T(u,t[i]?.[d]):t[i]?.[d]===u))return!1;return!0}class S{carousel;carouselLiveRegion;carouselSlides;slideWidth;slideGap;slideCount;fullSlidesShownInViewport;currentSlide;loop;debounceResizeTimeout=void 0;constructor(t){this.carousel=t,this.loop=this.carousel.dataset.loop==="true",this.currentSlide=0;const i=t.querySelector("div[data-carousel-live-region]");if(!i)throw new Error("Carousels must have a live region for accessibility.");this.carouselLiveRegion=i;const n=t.querySelector("ul[data-carousel-slides]");if(!n)throw new Error("Carousels must have a slides element.");this.carouselSlides=n,this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:d,slideWidth:u,slideGap:P,fullSlidesShownInViewport:W}=this.getSlideInfo();this.slideCount=d,this.slideGap=P,this.slideWidth=u,this.fullSlidesShownInViewport=W,(0,f.doAction)("launchpadBlocks.carousel.registerFunctionality",this),(0,f.addAction)("hookAdded","launchpadBlocks.carousel",(p,b,w,v)=>{p==="launchpadBlocks.carousel.registerFunctionality"&&w(this)}),window.addEventListener("resize",()=>{clearTimeout(this.debounceResizeTimeout),this.debounceResizeTimeout=setTimeout(()=>{this.carouselSlides.style.width="",this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:p,slideWidth:b,slideGap:w,fullSlidesShownInViewport:v}=this.getSlideInfo();this.slideCount=p,this.slideGap=w,this.slideWidth=b,this.fullSlidesShownInViewport=v,this.goToSlide(this.currentSlide,!0,!0)},100)})}getSlideInfo(){const t=this.carouselSlides.querySelectorAll(":scope > *").length,i=this.carouselSlides.querySelector(":scope > *")?.clientWidth,n=window.getComputedStyle(this.carouselSlides).getPropertyValue("column-gap"),d=y(n.endsWith("px")?n:"0px");if(!i)throw new Error("Unable to get the slide width for the carousel.");const u=Math.floor(this.carouselSlides.clientWidth/i);return{slideCount:t,slideWidth:i,slideGap:d,fullSlidesShownInViewport:u}}goToSlide(t,i=!1,n=!1){if(this.currentSlide===t&&!n)return;if(t<0)throw new Error("The slide number must be more than zero.");if(t>this.slideCount)throw new Error("The slide number must less than the total number of slides.");const d=this.carouselSlides.scrollLeft,u=t*(this.slideWidth+this.slideGap);this.currentSlide=t,this.carouselSlides.scrollBy({left:u-d,behavior:i?"instant":"auto"}),this.carouselLiveRegion.textContent=`Slide ${this.currentSlide+1} of ${this.slideCount}`,(0,f.doAction)("launchpadBlocks.carousel.updateActiveSlide")}goToPreviousSlide(t=!1){let i=this.currentSlide-1;if(i<0){if(!this.loop)return;i=this.slideCount-(this.fullSlidesShownInViewport-1)-1}this.goToSlide(i,t)}goToNextSlide(t=!1){let i=this.currentSlide+1;if(i>=this.slideCount-(this.fullSlidesShownInViewport-1)){if(!this.loop)return;i=0}this.goToSlide(i,t)}}m()(()=>{const e=document.querySelectorAll("[data-launchpad-carousel]");for(const t of e)t.parentElement?.dataset.lightbox!==""&&new S(t)})}),8490:(o=>{o.exports=window.wp.domReady})},a={};function r(o){var s=a[o];if(s!==void 0)return s.exports;var l=a[o]={exports:{}};return g[o](l,l.exports,r),l.exports}r.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return r.d(s,{a:s}),s},r.d=(o,s)=>{for(var l in s)r.o(s,l)&&!r.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:s[l]})},r.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var c={};r.r(c),r.d(c,{Lightbox:()=>x});var h=r(6);class x{lightbox;carousel=null;constructor(s){this.lightbox=s;const l=this.lightbox.querySelector("button[data-lightbox-close-button]");if(!l)throw new Error("The lightbox must have a close button.");l.addEventListener("click",()=>{this.close()})}initCarousel(){this.lightbox.style.opacity="0";const s=this.lightbox.querySelector("div[data-launchpad-carousel]");if(!s)throw new Error("Expected to initialise a carousel in the gallery lightbox, but one wasn't found.");this.carousel=new h.Carousel(s),this.lightbox.style.opacity=""}open(){this.lightbox.showModal()}close(){this.lightbox.close()}}return c})());
