(function(a,r){if(typeof exports=="object"&&typeof module=="object")module.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var c=r();for(var h in c)(typeof exports=="object"?exports:a)[h]=c[h]}})(globalThis,()=>(()=>{"use strict";var w={6:((o,s,n)=>{n.d(s,{Carousel:()=>b});var x=n(8490),_=n.n(x);const f=window.wp.hooks;function m(e){if(e===void 0)throw new Error(`Pixel value ${e} is undefined`);if(!e.endsWith("px"))throw new Error(`Pixel value ${e} is not a pixel value`);if(e.includes(" "))throw new Error(`Pixel value ${e} contains multiple values`);return Number(e.replace("px",""))}function P(e){let t="";const i=document.createElement("div");return i.innerHTML=e,t=i.innerText,y(t)}function y(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|(?<!-)-+$/g,"")}function E(e,t=()=>!0){const i=e.parentElement;return i===null?null:t(i)?i:E(i,t)}function L(e){if(new RegExp("ms$","ig").test(e))return Number(e.substring(0,e.length-2));if(new RegExp("s$","ig").test(e))return Number(e.substring(0,e.length-1))*1e3;throw new Error("Time didn't end with ms or s so was not correctly parsed.")}function W(){if(typeof document>"u")return"unknown";const e=window.navigator.userAgent;let t="unknown";return e.search("Windows")!==-1?t="Windows":e.search("Mac")!==-1?t="MacOS":e.search("X11")!==-1&&e.search("Linux")===-1?t="UNIX":e.search("Linux")!==-1&&e.search("X11")!==-1&&(t="Linux"),t}function C(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Object.entries(e[i]).every(([u,d])=>Array.isArray(d)?C(d,t[i]?.[u]):t[i]?.[u]===d))return!1;return!0}class b{carousel;carouselLiveRegion;carouselSlides;slideWidth;slideGap;slideCount;currentSlide;loop;debounceResizeTimeout=void 0;constructor(t){this.carousel=t,this.loop=this.carousel.dataset.loop==="true",this.currentSlide=0;const i=t.querySelector("div[data-carousel-live-region]");if(!i)throw new Error("Carousels must have a live region for accessibility.");this.carouselLiveRegion=i;const l=t.querySelector("ul[data-carousel-slides]");if(!l)throw new Error("Carousels must have a slides element.");this.carouselSlides=l,this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:u,slideWidth:d,slideGap:T}=this.getSlideInfo();this.slideCount=u,this.slideGap=T,this.slideWidth=d,(0,f.doAction)("launchpadBlocks.carousel.registerFunctionality",this),(0,f.addAction)("hookAdded","launchpadBlocks.carousel",(p,S,g,A)=>{p==="launchpadBlocks.carousel.registerFunctionality"&&g(this)}),window.addEventListener("resize",()=>{clearTimeout(this.debounceResizeTimeout),this.debounceResizeTimeout=setTimeout(()=>{this.carouselSlides.style.width="",this.carouselSlides.style.width=`${this.carouselSlides.clientWidth}px`;const{slideCount:p,slideWidth:S,slideGap:g}=this.getSlideInfo();this.slideCount=p,this.slideGap=g,this.slideWidth=S,this.goToSlide(this.currentSlide,!0,!0)},100)})}getSlideInfo(){const t=this.carouselSlides.querySelectorAll(":scope > *").length,i=this.carouselSlides.querySelector(":scope > *")?.clientWidth,l=window.getComputedStyle(this.carouselSlides).getPropertyValue("column-gap"),u=m(l.endsWith("px")?l:"0px");if(!i)throw new Error("Unable to get the slide width for the carousel.");return{slideCount:t,slideWidth:i,slideGap:u}}goToSlide(t,i=!1,l=!1){if(this.currentSlide===t&&!l)return;if(t<0)throw new Error("The slide number must be more than zero.");if(t>this.slideCount)throw new Error("The slide number must less than the total number of slides.");const u=this.carouselSlides.scrollLeft,d=t*(this.slideWidth+this.slideGap);this.currentSlide=t,this.carouselSlides.scrollBy({left:d-u,behavior:i?"instant":"auto"}),this.carouselLiveRegion.textContent=`Slide ${this.currentSlide+1} of ${this.slideCount}`,(0,f.doAction)("launchpadBlocks.carousel.updateActiveSlide")}goToPreviousSlide(t=!1){let i=this.currentSlide-1;if(i<0){if(!this.loop)return;i=this.slideCount-1}this.goToSlide(i,t)}goToNextSlide(t=!1){let i=this.currentSlide+1;if(i>=this.slideCount){if(!this.loop)return;i=0}this.goToSlide(i,t)}}_()(()=>{const e=document.querySelectorAll("[data-launchpad-carousel]");for(const t of e)t.parentElement?.dataset.lightbox!==""&&new b(t)})}),8490:(o=>{o.exports=window.wp.domReady})},a={};function r(o){var s=a[o];if(s!==void 0)return s.exports;var n=a[o]={exports:{}};return w[o](n,n.exports,r),n.exports}r.n=o=>{var s=o&&o.__esModule?()=>o.default:()=>o;return r.d(s,{a:s}),s},r.d=(o,s)=>{for(var n in s)r.o(s,n)&&!r.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:s[n]})},r.o=(o,s)=>Object.prototype.hasOwnProperty.call(o,s),r.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var c={};r.r(c),r.d(c,{Lightbox:()=>v});var h=r(6);class v{lightbox;carousel=null;constructor(s){this.lightbox=s;const n=this.lightbox.querySelector("button[data-lightbox-close-button]");if(!n)throw new Error("The lightbox must have a close button.");n.addEventListener("click",()=>{this.close()})}initCarousel(){this.lightbox.style.opacity="0";const s=this.lightbox.querySelector("div[data-launchpad-carousel]");if(!s)throw new Error("Expected to initialise a carousel in the gallery lightbox, but one wasn't found.");this.carousel=new h.Carousel(s),this.lightbox.style.opacity=""}open(){this.lightbox.showModal()}close(){this.lightbox.close()}}return c})());
