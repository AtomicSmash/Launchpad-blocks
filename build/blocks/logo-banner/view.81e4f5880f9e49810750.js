(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;var i=e.n(t);class r{userPrefersReducedMotion=!0;initiallyVisibleItems=[];initiallyVisibleImagesObserver=null;debounceResizeTimeout=void 0;currentScrollPosition=0;scrollOffset=0;scrollInterval=void 0;constructor(e){this._setUserPrefersReducedMotion(this._getUserPrefersReducedMotion()),this._attachPrefersReducedMotionListener(),this.banner=e,this.scrollContainer=this.banner.querySelector("div.scroll-container"),this.imagesContainer=this.scrollContainer.querySelector(":scope > div.images"),this.scrollbarWidth=this.scrollContainer.offsetHeight-this.scrollContainer.clientHeight,"complete"===document.readyState?this.initialiseBanner().catch(()=>{throw new Error("Failed to initialise banner.")}):document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&this.initialiseBanner().catch(()=>{throw new Error("Failed to initialise banner.")})}),window.addEventListener("resize",()=>{clearTimeout(this.debounceResizeTimeout),this.debounceResizeTimeout=setTimeout(()=>{this.reinitialiseBanner()},100)})}_attachPrefersReducedMotionListener(){window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",()=>{this._setUserPrefersReducedMotion(this._getUserPrefersReducedMotion())})}_getUserPrefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}_setUserPrefersReducedMotion(e){this.userPrefersReducedMotion=e}async initialiseBanner(){this.scrollContainer.style.marginBlockEnd=`-${this.scrollbarWidth}px`,await this.getInitiallyVisibleImages().then(()=>{this.imagesContainer.append(...this.initiallyVisibleItems),this.scrollOffset=this.scrollContainer.offsetLeft,this.scrollInterval=setInterval(()=>{const e=this.imagesContainer.querySelectorAll(".wp-block-image")[this.currentScrollPosition+1];if(!e)throw clearInterval(this.scrollInterval),new Error("Expected element, but received undefined.");(function(e,t){const{timeout:i,...r}={timeout:1e4,...t};return new Promise((t,s)=>{const n=()=>{e.removeEventListener("scrollend",n),t()};e.scrollTo(r),e.addEventListener("scrollend",n),setTimeout(()=>{e.removeEventListener("scrollend",n),s(new Error("Scroll to event timed out."))},i)})})(this.scrollContainer,{left:e.offsetLeft-this.scrollOffset,behavior:this.userPrefersReducedMotion?"instant":"smooth",timeout:2e3}).then(()=>{++this.currentScrollPosition,this.imagesContainer.querySelectorAll(".wp-block-image")[this.currentScrollPosition].classList.contains("overflow-item")&&(this.scrollContainer.scrollTo({left:0,behavior:"instant"}),this.currentScrollPosition=0)}).catch(()=>{throw clearInterval(this.scrollInterval),new Error("Scroll by timed out.")})},3e3)})}cleanupBanner(){this.resetGallery(),this.scrollOffset=0,this.currentScrollPosition=0,this.initiallyVisibleImagesObserver?.disconnect(),this.initiallyVisibleImagesObserver=null,clearInterval(this.scrollInterval)}reinitialiseBanner(){this.cleanupBanner(),this.initialiseBanner().catch(()=>{throw new Error("Failed to re-initialise banner.")})}async getInitiallyVisibleImages(){return new Promise(e=>{var t;const i=this.imagesContainer.querySelectorAll(".wp-block-image"),r=[];null!==(t=this.initiallyVisibleImagesObserver)&&void 0!==t||(this.initiallyVisibleImagesObserver=new IntersectionObserver((t,s)=>{i.length===t.length&&(t.forEach(e=>{e.isIntersecting&&r.push(e.target)}),this.initiallyVisibleImagesObserver.disconnect(),e(r))},{root:this.imagesContainer}));for(const e of i)this.initiallyVisibleImagesObserver.observe(e)}).then(e=>{this.initiallyVisibleItems=e.map(e=>((e=e.cloneNode(!0)).classList.add("overflow-item"),e))})}resetGallery(){this.initiallyVisibleItems=[],this.imagesContainer.replaceChildren(...this.imagesContainer.querySelectorAll(".wp-block-image:not(.overflow-item)"))}}i()(()=>{const e=document.querySelectorAll('[data-launchpad-logo-banner][data-is-scrolling="true"]');for(const t of e)new r(t)})})();