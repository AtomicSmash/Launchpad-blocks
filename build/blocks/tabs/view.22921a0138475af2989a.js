(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.domReady;var a=t.n(e);class r{constructor(t){this.tabsGroup=t;const e=this.tabsGroup.dataset.tabsGroupId;if(!e)throw new Error("Unable to find the tabs group id for the tabs group.");this.tabsGroupId=e;const a=this.tabsGroup.querySelector('div[role="tablist"]');if(!a)throw new Error("Unable to find the tabs list element in a tabs group.");this.tabsList=a;const r=this.tabsList.querySelectorAll('a[role="tab"]');if(!r)throw new Error("Unable to find the tab trigger elements in a tabs group.");this.tabTriggers=Array.from(r);const s=this.tabsGroup.querySelectorAll('section[role="tabpanel"]');if(!s)throw new Error("Unable to find the tab panel elements in a tabs group.");this.tabPanels=Array.from(s),this.initialiseTabGroup()}initialiseTabGroup(){this.improveKeyboardNavigationOfTabs(),this.preventPageReloadOnTabSelection()}improveKeyboardNavigationOfTabs(){this.tabTriggers.forEach(((t,e)=>{"true"!==t.ariaSelected?.toLowerCase()&&(t.tabIndex=-1),t.addEventListener("keydown",(a=>{switch(a.key){case"ArrowLeft":0===e?this.tabTriggers.at(-1)?.focus():this.tabTriggers.at(e-1)?.focus();break;case"ArrowRight":e===this.tabTriggers.length-1?this.tabTriggers.at(0)?.focus():this.tabTriggers.at(e+1)?.focus();break;case" ":a.preventDefault(),this.clickTab(t)}}))}))}clickTab(t){const e=t.getAttribute("aria-controls");if(!e)throw new Error("Can't find the ID of the panel to switch to.");this.swapActiveTab(e),this.swapActivePanel(e),this.updateUrlBar(e)}preventPageReloadOnTabSelection(){this.tabTriggers.forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),this.clickTab(t)}))}))}swapActiveTab(t){const e=this.tabTriggers.find((t=>"true"===t.ariaSelected)),a=this.tabTriggers.find((e=>e.getAttribute("aria-controls")===t));if(!a)throw new Error("Failed to find the tab to be activated.");e&&(e.ariaSelected="false",e.tabIndex=-1),a.ariaSelected="true",a.removeAttribute("tabindex")}swapActivePanel(t){const e=this.tabPanels.find((t=>t.classList.contains("is-selected"))),a=this.tabPanels.find((e=>e.id===t));if(!a)throw new Error("Failed to find the panel to be activated.");e&&e.classList.remove("is-selected"),a.classList.add("is-selected")}updateUrlBar(t){const e=new URL(window.location.href);e.searchParams.set(`tabs_${this.tabsGroupId}`,t),window.history.replaceState(window.history.state,"",`${e.pathname}${e.search}${e.hash}`)}}a()((()=>{const t=document.querySelectorAll("[data-tabs-group]");for(const e of t)new r(e)}))})();